System.register(["./p-5b5d4cc0.system.js","./p-750455a1.system.js"],(function(t){"use strict";var e,i,n,s,o,a,h,r,l,c,d,b,u,g;return{setters:[function(t){e=t.r;i=t.h;n=t.g;s=t.c;o=t.H;a=t.d},function(t){h=t.D;r=t.d;l=t.s;c=t.b;d=t.p;b=t.c;u=t.g;g=t.a}],execute:function(){const f=":host{height:var(--super-tab-height, 100%);position:relative;display:block;overflow-x:hidden;overflow-y:auto;contain:size style;z-index:1;-ms-flex-negative:0;flex-shrink:0;-ms-flex-positive:0;flex-grow:0;width:var(--super-tab-width, 100vw);-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex-order:-1;order:-1;-webkit-user-select:none;-webkit-touch-callout:none;-webkit-text-size-adjust:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-font-smoothing:antialiased}:host[noScroll]{overflow-y:hidden}ion-nav,ion-content{height:100%;max-height:100%;position:absolute}ion-nav>.ion-page,ion-content>.ion-page{position:absolute}";const x=t("super_tab",class{constructor(t){e(this,t)}componentDidLoad(){this.checkIonContent()}componentDidUpdate(){this.checkIonContent()}checkIonContent(){if(typeof this.noScroll!=="boolean"){const t=this.el.querySelector("ion-content");if(t&&t.parentElement===this.el){this.noScroll=true}}}async getRootScrollableEl(){if(!this.noScroll&&this.el.scrollHeight>this.el.clientHeight){return this.el}const t=this.el.querySelector("ion-content");if(t){return t.getScrollElement()}if(this.noScroll){return null}return this.el}render(){return i("slot",null)}get el(){return n(this)}});x.style=f;const m=":host{height:100%;max-height:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;overflow:hidden;z-index:1;position:relative;contain:layout size style;-ms-flex-order:-1;order:-1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;-webkit-text-size-adjust:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-font-smoothing:antialiased;-ms-touch-action:none;touch-action:none;-webkit-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0}";const T=1e3;const p=t("super_tabs",class{constructor(t){e(this,t);this.activeTabIndex=0;this._config=h;this.initAttempts=0;this.initPromise=new Promise(t=>{this.initPromiseResolve=t});this.tabChange=s(this,"tabChange",7)}async setConfig(t){this.debug("setConfig called with: ",t);this._config=Object.assign(Object.assign({},h),t)}propagateConfig(){this.container&&(this.container.config=this._config);this.toolbar&&(this.toolbar.config=this._config)}async selectTab(t,e=true){this.debug("selectTab",t,e);await this.initPromise;const i=this.activeTabIndex;if(this.container){await this.container.setActiveTabIndex(t,true,e)}if(this.toolbar){await this.toolbar.setActiveTab(t,true,e)}this.emitTabChangeEvent(t,i);this.activeTabIndex=i}async onConfigChange(t){await this.setConfig(t)}onWindowResize(){this.debug("onWindowResize");this.toolbar&&this.toolbar.setSelectedTab(this.activeTabIndex);this.container.reindexTabs()}async componentWillLoad(){this.debug("componentWillLoad");if(this.config){await this.setConfig(this.config)}}componentDidLoad(){this.debug("componentDidLoad");this.indexChildren();if(this.container){this.container.setActiveTabIndex(this.activeTabIndex)}if(this.toolbar){this.toolbar.setActiveTab(this.activeTabIndex)}this.el.shadowRoot.addEventListener("slotchange",this.onSlotchange.bind(this));requestAnimationFrame(()=>{this.initComponent()})}initComponent(){if(!this.container){if(++this.initAttempts<T){requestAnimationFrame(()=>{this.initComponent()});return}}this.debug(`failed to init ${this.initAttempts} times`);if(this.container){this.container.moveContainerByIndex(this.activeTabIndex,false)}if(this.toolbar){this.toolbar.setSelectedTab(this.activeTabIndex,false)}this.propagateConfig();this.setupEventListeners();this.initPromiseResolve()}async setupEventListeners(){if(this.container){await this.container.componentOnReady();this.el.addEventListener("selectedTabIndexChange",this.onContainerSelectedTabChange.bind(this));this.el.addEventListener("activeTabIndexChange",this.onContainerActiveTabChange.bind(this))}else{this.debug("setupEventListeners: container does not exist")}if(this.toolbar){await this.toolbar.componentOnReady();this.el.addEventListener("buttonClick",this.onToolbarButtonClick.bind(this))}else{this.debug("setupEventListeners: toolbar does not exist")}}async onContainerSelectedTabChange(t){if(this.toolbar){await this.toolbar.setSelectedTab(t.detail)}}emitTabChangeEvent(t,e){if(typeof t!=="number"||t<0){return}if(typeof e!=="number"||e<0){e=this.activeTabIndex}this.tabChange.emit({changed:t!==e,index:t})}onContainerActiveTabChange(t){this.debug("onContainerActiveTabChange",t);const e=t.detail;this.emitTabChangeEvent(e);this.activeTabIndex=e;this.toolbar&&this.toolbar.setActiveTab(e,true,true)}onToolbarButtonClick(t){this.debug("onToolbarButtonClick",t);const{index:e}=t.detail;this.container&&this.container.setActiveTabIndex(e,true,true);this.emitTabChangeEvent(e);this.activeTabIndex=e}indexChildren(){this.debug("indexChildren");const t=this.el.querySelector("super-tabs-container");const e=this.el.querySelector("super-tabs-toolbar");if(t&&this.container!==t){this.container=t}if(e&&this.toolbar!==e){this.toolbar=e}this.propagateConfig()}async onSlotchange(){this.indexChildren();this.selectTab(this.activeTabIndex)}debug(...t){r(this._config,"tabs",t)}render(){return i(o,null,i("slot",{name:"top"}),i("slot",null),i("slot",{name:"bottom"}))}get el(){return n(this)}static get watchers(){return{config:["onConfigChange"]}}});p.style=m;const v=":host{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;min-width:100%;-ms-flex:1 1 auto;flex:1 1 auto;position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;width:var(--super-tab-width, 100vw);height:var(--super-tab-height, 100%);overflow:hidden;-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);-ms-touch-action:pan-y;touch-action:pan-y;-moz-user-select:none;-ms-user-select:none;user-select:none;will-change:scroll-position;-ms-flex-order:-1;order:-1;-webkit-user-select:none;-webkit-touch-callout:none;-webkit-text-size-adjust:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-font-smoothing:antialiased}";const w=t("super_tabs_container",class{constructor(t){e(this,t);this.swipeEnabled=true;this.autoScrollTop=false;this.tabs=[];this.isDragging=false;this.leftThreshold=0;this.rightThreshold=0;this.scrollWidth=0;this.clientWidth=0;this.activeTabIndexChange=s(this,"activeTabIndexChange",7);this.selectedTabIndexChange=s(this,"selectedTabIndexChange",7);this.queue=a(this,"queue")}async componentDidLoad(){this.debug("componentDidLoad");await this.indexTabs();this.slot=this.el.shadowRoot.querySelector("slot");this.slot.addEventListener("slotchange",this.onSlotChange.bind(this))}async onSlotChange(){this.debug("onSlotChange",this.tabs.length)}async componentWillUpdate(){await this.indexTabs()}async reindexTabs(){await this.indexTabs()}moveContainerByIndex(t,e){const i=this.indexToPosition(t);if(i===0&&t>0){return Promise.resolve()}return this.moveContainer(i,e)}moveContainer(t,e){l(this.el,t,0,e?this.config.transitionDuration:0);return Promise.resolve()}async setActiveTabIndex(t,e=true,i=true){this.debug("setActiveTabIndex",t);if(this._activeTabIndex===t){if(!this.autoScrollTop){return}await this.scrollToTop()}if(e){await this.moveContainerByIndex(t,i)}await this.updateActiveTabIndex(t,false)}async scrollToTop(){if(this._activeTabIndex===undefined||this.tabs===undefined){this.debug("activeTabIndex or tabs was undefined");return}const t=this.tabs[this._activeTabIndex];this.queue.read(()=>{if(!t){this.debug("Current active tab was undefined in scrollToTop");return}t.getRootScrollableEl().then(t=>{if(t){l(t,0,0,this.config.transitionDuration)}})})}updateActiveTabIndex(t,e=true){this.debug("updateActiveTabIndex",t,e,this._activeTabIndex);this._activeTabIndex=t;e&&this.activeTabIndexChange.emit(this._activeTabIndex)}updateSelectedTabIndex(t){if(t===this._selectedTabIndex){return}this._selectedTabIndex=t;this.selectedTabIndexChange.emit(this._selectedTabIndex)}async onTouchStart(t){if(!this.swipeEnabled){return}if(this.config.avoidElements){let e=false;let i=t.target;if(i){do{if(typeof i.getAttribute==="function"&&i.getAttribute("avoid-super-tabs")){return}i=i.parentElement}while(i&&!e)}}const e=d(t);const i=this.clientWidth;if(e.x<this.leftThreshold||e.x>i-this.rightThreshold){return}if(this.config.shortSwipeDuration>0){this.initialTimestamp=c()}this.initialCoords=e;this.lastPosX=e.x}async onClick(t){if(this.isDragging){t.stopImmediatePropagation();t.preventDefault()}}async onTouchMove(t){if(!this.swipeEnabled||!this.initialCoords||typeof this.lastPosX!=="number"){return}const e=d(t);if(!this.isDragging){const t=b(e,this.initialCoords,this.config);if(!t){if(Math.abs(e.y-this.initialCoords.y)>100){this.initialCoords=void 0;this.lastPosX=void 0}return}this.isDragging=true}if(!this.isDragging){return}if(!this.config.allowElementScroll){t.stopImmediatePropagation()}const i=this.lastPosX-e.x;if(i===0){return}const n=u(this.el);const s=g(this.el,i);if(s===n){return}this.updateSelectedTabIndex(this.positionToIndex(s));this.lastPosX=e.x;this.moveContainer(s,false)}async onTouchEnd(t){if(!this.swipeEnabled||!this.isDragging){return}const e=d(t);const i=c()-this.initialTimestamp;const n=this.config.shortSwipeDuration>0&&i<=this.config.shortSwipeDuration;const s=e.x-this.initialCoords.x;let o=this.calcSelectedTab();const a=Math.round(o);if(n&&a===this._activeTabIndex){o+=s>0?-1:1}o=this.normalizeSelectedTab(o);this.updateActiveTabIndex(o);this.moveContainerByIndex(o,true);this.isDragging=false;this.initialCoords=void 0;this.lastPosX=void 0}async indexTabs(){this.scrollWidth=this.el.scrollWidth;this.clientWidth=this.el.clientWidth;this.debug("indexTab",this.scrollWidth,this.clientWidth);if(this.scrollWidth===0||this.clientWidth===0){requestAnimationFrame(()=>{this.indexTabs()});return}const t=Array.from(this.el.querySelectorAll("super-tab"));await Promise.all(t.map(t=>t.componentOnReady()));this.tabs=t;if(this.ready&&typeof this._activeTabIndex==="number"){this.moveContainerByIndex(this._activeTabIndex,true)}if(this.config){switch(this.config.sideMenu){case"both":this.rightThreshold=this.leftThreshold=this.config.sideMenuThreshold||0;break;case"left":this.leftThreshold=this.config.sideMenuThreshold||0;break;case"right":this.rightThreshold=this.config.sideMenuThreshold||0;break}}if(this._activeTabIndex!==undefined){this.moveContainerByIndex(this._activeTabIndex,false).then(()=>{this.ready=true})}}calcSelectedTab(){const t=this.scrollWidth;const e=this.clientWidth;const i=0;const n=t-e;const s=Math.max(i,Math.min(n,u(this.el)));return this.positionToIndex(s)}positionToIndex(t){const e=this.clientWidth;return t/e}indexToPosition(t){this.debug("indexToPosition",t,this.clientWidth);const e=this.clientWidth;return t*e}normalizeSelectedTab(t){const e=this.scrollWidth;const i=this.clientWidth;const n=0;const s=e-i;const o=Math.max(n,Math.min(s,i*Math.round(t)));return o/i}debug(...t){r(this.config,"container",t)}render(){return i("slot",null)}get el(){return n(this)}});w.style=v}}}));